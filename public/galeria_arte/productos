 var app= new Vue({
    el:'#app',
    data:function(){
        return{
            productos:[
            {
              id:0,
              nombre:'',
              precio:0,
              descripcion:'',
              idtipo:'',
              foto:'',
            }
            ],//Hay veo como paso los datos al formato correspondiente

            tipos: @JSON($tipos),
            categoria_seleccionada:1,

            
            orden:[],
            usuario:{
              nombre:'',
              id:0,
              email:'',
              telefono:'',
              foto:'',
            
            },


        }
    },
    computed:{
      filtro_categoria(){
          return this.productos.filter(prod=>prod.idtipo==this.categoria_seleccionada)
      },
      productos_categoria(){
        //La funcion devuelve el el tipo.id de la categoria selccionada en el momento
        //Con nombre se puede acceder a cualquier propiedad de tipos.
        let n=this.tipos.findIndex(tipo=>tipo.id==this.categoria_seleccionada)
        let nombre_categoria= (this.n<-1) ? '':this.tipos[n].nombre;//Validacion, por si acaso
        return nombre_categoria;
      }
        
    },
    methods:{


      //Funcion que envia el producto hacia 
        
    }
    ,created(){
    


    var xhr = new XMLHttpRequest();
    xhr.open('GET','/productos',true);
    //funcion flecha para que el this apunte directamente a vue
    xhr.onreadystatechange= ()=>{
      if(xhr.readyState==4){
        if(xhr.status==200){
          this.productos=JSON.parse(xhr.responseText);  
            
        }
        else{
          alert("Falla");
        }
      }
    };
    xhr.send();

  }
    

})